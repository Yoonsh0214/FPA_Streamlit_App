# FPA Web App 통계 및 산출 공식 매뉴얼

## 1. 개요
이 문서는 FPA Web App에서 사용되는 이벤트 코드와 각 스탯 별 점수 산출 공식을 설명합니다.

## 2. 이벤트 코드 (Action Codes)

| 코드 | 액션명 | 설명 |
|---|---|---|
| `ss`, `s` | Pass | 패스 (2점 입력) |
| `d`, `db` | Shot, Blocked Shot | 슈팅, 막힌 슈팅 |
| `dd` | Shot On Target | 유효 슈팅 |
| `ddd` | Goal | 득점 |
| `zz`, `z` | Assist, Key Pass | 어시스트, 키패스 |
| `cc`, `c` | Cross | 크로스 (2점 입력) |
| `ee` | Breakthrough | 돌파/탈압박 (2점 입력) |
| `rr` | Dribble | 드리블 (1점 입력) |
| `aa` | Tackle | 태클 |
| `q` | Intercept | 인터셉트 |
| `w` | Clear | 클리어 |
| `ww`, `qw` | Cutout, Block | 커트, 블락 |
| `v`, `vv` | Catching, Punching | 골키퍼 캐칭, 펀칭 |
| `bb`, `b` | Duel | 경합 |
| `f`, `ff` | Foul, Be Fouled | 파울, 피파울 |
| `o` | Offside | 오프사이드 |
| `t` | Touch | 터치 |
| `st` | Sprint | 스프린트 (2점 입력) |

---

## 3. 스코어 산출 공식 (Scoring Logic)

각 점수는 Raw Score를 산출한 후 시그모이드(Sigmoid) 함수를 통해 0~100점 사이의 점수로 변환됩니다.
**모든 스코어는 기본적으로 Raw Score가 0일 때 50점이 되도록 설정되어 있습니다. (데이터가 없는 경우도 50점으로 처리)**

### 1) Passing Score (패스 점수)
*   **공식**: `(성공률 * 0.8) + (전진패스 * 1.5) + (키패스 * 2.5) + (어시스트 * 5) + (박스안패스 * 3) - (패스미스 * 0.5)`
*   기본적인 패스 능력과 찬스 메이킹 능력을 종합적으로 평가합니다.

### 2) Shooting Score (슈팅 점수)
*   **공식**: `((득점 - xG) * 10) + (xG * 15) + (헤더득점 * 5) + (중거리/박스밖득점 * 3)`
*   득점 결정력과 예상 득점(xG) 창출 능력을 평가합니다.

### 3) Cross Score (크로스 점수)
*   **공식**: `(성공률 * 0.7) + (ln(성공개수) * 3) + (중앙/박스안 연결 * 2.5)`
*   크로스의 정확도와 위협적인 지역으로의 연결 빈도를 평가합니다.

### 4) Dribbling Score (드리블 점수 - 성공/실패 기반)
*   **공식**: `(돌파성공 * 3) - ((드리블실패+미스) * 1) + (피파울 * 0.8)`
*   상대를 제치거나 파울을 유도하는 온더볼 능력을 평가합니다.

### 5) TAC Score (Tackling - 태클 및 수비)
*   **공식**: `(태클성공 * 2) - (태클실패 * 1) + (인터셉트 * 1.5) + (블락 * 1.2) + (클리어 * 1) + (공중볼승리 * 1.5) - (공중볼패배 * 0.5) + (경합승리 * 0.5)`
*   기존 Defending Score를 대체하며, 적극적인 수비 개입과 대인 방어 능력을 평가합니다.

### 6) DRV Score (Drive - 볼 운반)
*   **공식**: `(∑유효드리블거리(5m이상) * 0.15) - (드리블장소실패 * 2)`
*   공을 소유하고 전진한 거리(Carrying)를 기반으로 볼 운반 능력을 평가합니다.

### 7) BLD Score (Build-up - 후방 빌드업)
*   **공식**: `∑(자기진영 패스 점수) - (자기진영 패스미스 * 2)`
    *   *자기진영 패스 점수*: 기본 0.5점 + (전진거리 5m 이상 시 거리 * 0.1 추가 보너스)
*   수비 지역에서의 안정적인 볼 배급과 전진 패스 기여도를 평가합니다.

### 8) SAV Score (Save - 골키퍼 선방)
*   **공식**: `((피유효슈팅xG - 실점) * 10) + (선방xG * 10) + (캐칭 * 2)`
    *   *선방xG*: 골로 연결되지 않은 유효슈팅의 xG 합계
*   골키퍼의 슈팅 방어 능력(Goals Prevented)과 안정감(Catching)을 평가합니다.

### 9) HED Score (Header - 공중볼 장악)
*   **공식**: `(헤더유효슈팅 * 3) + (헤더득점 * 2) + (공중볼승리 * 2) + (헤더클리어 * 1) - (공중볼패배 * 1.5)`
*   공중볼 경합 승리, 헤더 슈팅 및 클리어링 등 제공권 장악 능력을 평가합니다.

### 10) PAC Score (Pace - 주력/활동량)
*   **공식**: `(스프린트횟수 * 1) + (총스프린트거리 * 0.1)`
*   `st` 코드로 입력된 스프린트 데이터(횟수, 거리)를 기반으로 선수의 기동력을 평가합니다.

---

## 4. 고급 지표 (Advanced Scores)

*   **FST (First Touch)**: 패스/돌파 성공률을 기반으로 한 볼 키핑 안정성.
*   **OFF (Off The Ball)**: 받은 패스, 슈팅 기회 창출, 오프사이드 등을 통한 움직임 평가.
*   **DEC (Decision)**: 원터치 플레이(First Time)의 성공률을 통한 판단 속도 및 정확성 평가.
